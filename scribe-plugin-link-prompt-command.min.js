define("scribe-default-link-prompt",[],function(){return function(e,t,n){var r=window.prompt("Enter a link.",e.href);null!==r?(e.href=r,t(e)):n()}}),define("scribe-plugin-link-prompt-command",["scribe-default-link-prompt"],function(e){return function(t){return function(n){var r=new n.api.Command("createLink");n.commands.linkPrompt=r,r.nodeName="A",r.queryState=function(){var e=new n.api.Selection;return!!e.getContaining(function(e){return e.nodeName===this.nodeName}.bind(this))},r.execute=function(){var r=new n.api.Selection,i=r.range,o=r.getContaining(function(e){return e.nodeName===this.nodeName}.bind(this));o&&(i.selectNode(o),r.selection.removeAllRanges(),r.selection.addRange(i));var a={};if(o&&o.hasAttributes())for(var c=0;c<o.attributes.length;c++){var f=o.attributes[c];a[f.name]=f.value}new Promise(function(n,r){t?t(Object.create(a),n,r):e(Object.create(a),n,r)}).then(function(e){if(e.href){var t=/^https?\:\/\//,a=/^mailto\:/;if(!t.test(e.href)&&!a.test(e.href))if(/@/.test(e.href)){var c=window.confirm("The URL you entered appears to be an email address. Do you want to add the required “mailto:” prefix?");c&&(e.href="mailto:"+e.href)}else{var f=window.confirm("The URL you entered appears to be a link. Do you want to add the required “http://” prefix?");f&&(e.href="http://"+e.href)}if(r=window.getSelection(),r.removeAllRanges(),r.addRange(i),n.api.SimpleCommand.prototype.execute.call(this,e.href),o){for(var u=i.commonAncestorContainer.querySelectorAll("a"),l=0;l<u.length;l++)if(r.containsNode(u[l],!0)){o=u[l];break}}else o=i.commonAncestorContainer.previousSibling;for(var d in e)e.hasOwnProperty(d)&&o.setAttribute(d,e[d])}}.bind(this))["catch"](function(){})}}}});//# sourceMappingURL=scribe-plugin-link-prompt-command.min.js.map